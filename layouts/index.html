{{- define "main" -}}

  {{/* ====== Home Infoï¼ˆä½¿ç”¨ hugo.toml çš„ homeInfoParamsï¼‰====== */}}
  {{ with site.Params.homeInfoParams }}
    <article class="first-entry home-info">
      <header class="entry-header">
        <h1>{{ .Title | markdownify }}</h1>
      </header>
      <div class="entry-content">
        {{ with .Content }}{{ . | safeHTML }}{{ end }}
      </div>      
    </article>
  {{ end }}

  {{/* ====== Featuredï¼šåªå±•ç¤º 3 ç¯‡ç²¾é€‰ ====== */}}
  {{ $featured := first 3 (where site.RegularPages "Params.featured" true) }}
  {{ if gt (len $featured) 0 }}
    <section class="home-featured">
      <h2 style="margin-top: 26px;">â­ ç²¾é€‰æ¨è</h2>
      <div class="featured-list">
        {{ range $featured }}
          <article class="post-entry">
            <header class="entry-header">
              <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
            </header>
            <div class="entry-content">
              <p>{{ .Summary }}</p>
            </div>
            <footer class="entry-footer">
              <span>{{ .Date.Format "2006-01-02" }}</span>
              <span> Â· {{ .ReadingTime }} min</span>
            </footer>
          </article>
        {{ end }}
      </div>
    </section>
  {{ end }}

  {{/* ====== Latestï¼šé»˜è®¤æ–‡ç« æµ + åˆ†é¡µ ====== */}}
  {{ $mainSections := site.Params.mainSections | default (slice "posts") }}
  {{ $pages := where site.RegularPages "Type" "in" $mainSections }}
  {{ $paginator := .Paginate $pages }}

  <section class="home-latest">
    <h2 style="margin-top: 26px;">ğŸ†• æœ€æ–°æ›´æ–°</h2>
    {{ range $paginator.Pages }}
      <article class="post-entry">
        <header class="entry-header">
          <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
        </header>
        <div class="entry-content">
          <p>{{ .Summary }}</p>
        </div>
        <footer class="entry-footer">
          <span>{{ .Date.Format "2006-01-02" }}</span>
          <span> Â· {{ .ReadingTime }} min</span>
        </footer>
      </article>
    {{ end }}
  </section>

  {{ template "_internal/pagination.html" . }}

{{- end -}}
