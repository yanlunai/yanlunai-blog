{{- define "main" -}}

{{/* =========================
     Home data
   ========================= */}}
{{ $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
{{ $pages = $pages.ByDate.Reverse }}

{{ $featured := where $pages "Params.featured" true }}
{{ $featured = first 3 $featured }}

{{/* æœ€æ–°æ›´æ–°åˆ†é¡µï¼ˆå— hugo.toml çš„ [pagination].pagerSize æ§åˆ¶ï¼‰ */}}
{{ $paginator := .Paginate $pages }}

<div class="yanlunai-home">

  <!-- =========================
       1) HERO
       ========================= -->
  <section class="yanlunai-hero">
    <!-- Left -->
    <div class="yanlunai-hero-left">
      <h1 class="yanlunai-hero-title">ğŸ”¥ ç„±è®ºAI Â· YanlunAI</h1>
      <p class="yanlunai-hero-subtitle">å¤§æ¨¡å‹æŠ€æœ¯æ ˆ Ã— è¡Œä¸šè½åœ°æ‰“æ³• Ã— ä¸ªä½“æˆé•¿è·¯å¾„</p>
      <div class="yanlunai-hero-tagline">
        æŠŠæ¨¡å‹èƒ½åŠ›ï¼Œå˜æˆåœ¨çœŸå®è¡Œä¸šé‡Œå¯è¯„ä¼°ã€å¯éƒ¨ç½²ã€å¯äº¤ä»˜çš„ç³»ç»Ÿ
      </div>

      <div class="yanlunai-hero-points">
        <div>ğŸ¯ <b>IP å®šä½</b>ï¼šé¢å‘ä¸€çº¿å·¥ç¨‹å®è·µçš„å¤§æ¨¡å‹ & è¡Œä¸šæ¨¡å‹ç ”ç©¶å‹ä¸ªäººå“ç‰Œ</div>
        <div>ğŸ“š <b>å†…å®¹çŸ©é˜µ</b>ï¼šè®ºæ–‡ç²¾è¯» / å·¥ç¨‹å®è·µ / å·¥å…·è§£æ / è¡Œä¸šæ‚è°ˆ</div>
        <div>ğŸ§  <b>å…³é”®è¯</b>ï¼šRAG å¹»è§‰æ§åˆ¶ Â· æ¨ç†é“¾å»ºæ¨¡ Â· è¡Œä¸šæ•°æ®å¯¹é½ Â· ç®—æ³•åˆ°æœåŠ¡ Â· ä¿¡åˆ›é€‚é…</div>
        <div>ğŸ‘¤ <b>é€‚åˆäººç¾¤</b>ï¼šAI å­¦ä¹ è€…ã€ç®—æ³•å·¥ç¨‹å¸ˆã€è¡Œä¸šæ•°å­—åŒ–ä»ä¸šè€…ã€æƒ³å…¥å±€å¤§æ¨¡å‹çš„äºº</div>
      </div>


      <div class="yanlunai-pill-grid">
        <a class="yanlunai-pill" href="{{ "categories/è®ºæ–‡ç²¾è¯»/" | relURL }}">
          <span class="yanlunai-pill-emoji">ğŸ“„</span>
          <span class="yanlunai-pill-title">è®ºæ–‡ç²¾è¯»</span>
          <span class="yanlunai-pill-desc">LLM / RAG / Agent</span>
        </a>
        <a class="yanlunai-pill" href="{{ "categories/å·¥ç¨‹å®è·µ/" | relURL }}">
          <span class="yanlunai-pill-emoji">âš™ï¸</span>
          <span class="yanlunai-pill-title">å·¥ç¨‹å®è·µ</span>
          <span class="yanlunai-pill-desc">éƒ¨ç½² / å¾®è°ƒ / æ¨ç†æœåŠ¡</span>
        </a>
        <a class="yanlunai-pill" href="{{ "categories/å·¥å…·è§£æ/" | relURL }}">
          <span class="yanlunai-pill-emoji">ğŸ§°</span>
          <span class="yanlunai-pill-title">å·¥å…·è§£æ</span>
          <span class="yanlunai-pill-desc">æ¡†æ¶è¯„æµ‹ / æ¨ç†å¼•æ“</span>
        </a>
        <a class="yanlunai-pill" href="{{ "categories/è¡Œä¸šæ‚è°ˆ/" | relURL }}">
          <span class="yanlunai-pill-emoji">âœï¸</span>
          <span class="yanlunai-pill-title">è¡Œä¸šæ‚è°ˆ</span>
          <span class="yanlunai-pill-desc">è¡Œä¸šè¶‹åŠ¿ / è¸©å‘å¤ç›˜</span>
        </a>
      </div>
    </div>

    <!-- Right -->
    <div class="yanlunai-hero-right" aria-label="ç„±è®ºAI Brand">
      <div class="yanlunai-hero-blobs" aria-hidden="true">
        <span class="yanlunai-blob yanlunai-blob-left"></span>
        <span class="yanlunai-blob yanlunai-blob-right"></span>
      </div>

      <!-- Logo (breath + halo) -->
      <div class="yanlunai-logo-wrap yanlunai-logo-breathe">
        <span class="yanlunai-logo-halo" aria-hidden="true"></span>
        <img class="yanlunai-logo-img"
             src="{{ "logo/yanlunai-logo-512.png" | relURL }}"
             alt="ç„±è®ºAI Logo"
             loading="eager"
             decoding="async">
      </div>

      <div class="yanlunai-social">
        <a class="yanlunai-social-btn" href="https://github.com/yanlunai" target="_blank" rel="noopener">GitHub</a>
        <a class="yanlunai-social-btn" href="https://www.zhihu.com/" target="_blank" rel="noopener">çŸ¥ä¹</a>
        <a class="yanlunai-social-btn" href="https://www.xiaohongshu.com/" target="_blank" rel="noopener">å°çº¢ä¹¦</a>
        <a class="yanlunai-social-btn" href="{{ "index.xml" | relURL }}">RSS</a>
      </div>

      <div class="yanlunai-social-hint">å…³æ³¨æˆ‘ï¼šå¤§æ¨¡å‹ Â· RAG Â· è¡Œä¸šè½åœ° Â· å·¥ç¨‹å®è·µ</div>

      <div class="yanlunai-search-wrap">
        <!-- âœ… ä¿®æ”¹ç‚¹ï¼šåŠ  id + input idï¼Œä¾¿äºé¦–é¡µç›´æ¥æ‹¦æˆª submit å¹¶å°±åœ°å‡ºç»“æœ -->
        <form id="yanlunai-home-search"
              class="yanlunai-search"
              action="{{ "search/" | relURL }}"
              method="get"
              role="search">
          <input id="yanlunai-home-search-input"
                 class="yanlunai-search-input"
                 type="search"
                 name="q"
                 placeholder="Search: RAG / å¯ä¿¡ / Agent / éƒ¨ç½²â€¦"
                 autocomplete="off"
                 aria-label="Search posts">
          <button class="yanlunai-search-btn" type="submit" aria-label="Submit search">Search</button>
        </form>

        <!-- âœ… ä½ åŸæœ¬æ–°å¢çš„ï¼šå³æ—¶æœç´¢ç»“æœé¢æ¿ï¼ˆä¿ç•™ï¼ŒJS ä¼šé©±åŠ¨å®ƒï¼‰ -->
        <div id="yanlunaiSearchPanel" class="yanlunai-search-panel" hidden>
          <div class="yanlunai-search-meta">
            <span id="yanlunaiSearchCount">0</span> results
            <button type="button" id="yanlunaiSearchClose" class="yanlunai-search-close" aria-label="Close">Ã—</button>
          </div>
          <ul id="yanlunaiSearchResults" class="yanlunai-search-results" role="listbox" aria-label="Search results"></ul>
        </div>

        <div class="yanlunai-search-hint">
          æ”¯æŒå…³é”®è¯æœç´¢ Â· <span class="yanlunai-kbd">/</span> å¿«æ·èšç„¦
        </div>
      </div>
    </div>
  </section>


  <!-- =========================
       2) FEATURED
       ========================= -->
  <section class="yanlunai-section yanlunai-section-featured">
    <div class="yanlunai-section-head">
      <div>
        <div class="yanlunai-section-title">â­ ç²¾é€‰æ¨è</div>
        <div class="yanlunai-section-sub">ä¸ºä½ ç²¾é€‰ Â· æ›´å€¼å¾—è¯»çš„ 3 ç¯‡</div>
      </div>
    </div>

    {{ if gt (len $featured) 0 }}
      <div class="yanlunai-featured-grid">
        {{ range $post := $featured }}
          <a class="yanlunai-fcard" href="{{ $post.RelPermalink }}">
            <div class="yanlunai-fcard-bg" aria-hidden="true"></div>

            <div class="yanlunai-fcard-body">
              <div class="yanlunai-fcard-title">{{ $post.Title }}</div>
              {{ with $post.Summary }}
                <div class="yanlunai-fcard-desc">{{ . }}</div>
              {{ end }}
            </div>

            <div class="yanlunai-fcard-meta">
              <span>{{ $post.Date.Format "2006-01-02" }}</span>
              <span class="yanlunai-dot">Â·</span>
              <span>{{ $post.ReadingTime }} min</span>
            </div>
          </a>
        {{ end }}
      </div>
    {{ else }}
      <div class="yanlunai-empty">
        è¿˜æ²¡æœ‰è®¾ç½®ç²¾é€‰æ–‡ç« ã€‚ç»™æ–‡ç«  front matter åŠ ä¸Šï¼š<code>featured: true</code> å³å¯å‡ºç°åœ¨è¿™é‡Œï¼ˆæœ€å¤šå±•ç¤º 3 ç¯‡ï¼‰ã€‚
      </div>
    {{ end }}
  </section>


  <!-- =========================
       3) LATEST (List only, newest first)
       - ä»…åˆ—è¡¨ï¼šæŒ‰æ—¶é—´å€’åºï¼ˆ$pages å·²ç» reverseï¼‰
       - åˆ†é¡µç”± hugo.toml çš„ [pagination].pagerSize æ§åˆ¶
       ========================= -->
  <section class="yanlunai-section yanlunai-section-latest" id="yanlunai-latest">
    <div class="yanlunai-section-head yanlunai-latest-head" id="yanlunai-latest-head">
    </div>

    {{ partial "recent-dual.html" (dict "ctx" . "paginator" $paginator) }}
  </section>

</div>
{{- end -}}